<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jens von Bergmann">
<meta name="author" content="Nathan Lauster">
<meta name="dcterms.date" content="2023-02-20">
<meta name="description" content="Taking a closer look at the CHSP data release and clearing up some misunderstandings.">

<title>Mountain Doodles - Investing in definitions and framing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/plain" cookie-consent="tracking">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-54516567-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Mountain Doodles - Investing in definitions and framing">
<meta property="og:description" content="Taking a closer look at the CHSP data release and clearing up some misunderstandings.">
<meta property="og:image" content="https://doodletest.netlify.app/posts/2023-02-20-investing-in-definitions-and-framing/index_files/figure-html/chsp-cmhc-census-comparison-1.png">
<meta property="og:site_name" content="Mountain Doodles">
<meta property="og:image:height" content="1200">
<meta property="og:image:width" content="2400">
<meta name="twitter:title" content="Mountain Doodles - Investing in definitions and framing">
<meta name="twitter:description" content="Taking a closer look at the CHSP data release and clearing up some misunderstandings.">
<meta name="twitter:image" content="https://doodletest.netlify.app/posts/2023-02-20-investing-in-definitions-and-framing/index_files/figure-html/chsp-cmhc-census-comparison-1.png">
<meta name="twitter:creator" content="@vb_jens">
<meta name="twitter:image-height" content="1200">
<meta name="twitter:image-width" content="2400">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../mm_stamp_small.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Mountain Doodles</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../archive.html"> 
<span class="menu-text">Archive</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mountainMath/mountaindoodles"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link active" href="https://twitter.com/vb_jens" aria-current="page"> <i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/vb-jens/"> <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:jens.mountainmath.ca"> <i class="bi bi-envelope-at-fill" role="img" aria-label="Email">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img" aria-label="RSS">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Investing in definitions and framing</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Investing in definitions and framing</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source" data-quarto-source-url="https://github.com/mountainMath/mountaindoodles/blob/main/posts/2023-02-20-investing-in-definitions-and-framing/index.markdown"><i class="bi"></i></button></div></div>
                  <div>
        <div class="description">
          Taking a closer look at the CHSP data release and clearing up some misunderstandings.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">cansim</div>
                <div class="quarto-category">newsfail</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-heading">Affiliations</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Jens von Bergmann </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              MountainMath
            </p>
        </div>
      <div class="quarto-title-meta-contents">
      <p class="author">Nathan Lauster </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              UBC, Department of Sociology
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 20, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="quarto-sidebar-header"><div class="sidebar-header-item">
<p><strong>Too much data, too little time</strong></p>
</div></div>
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../profile.jpg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/mountainMath" title="" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
    <a href="https://twitter.com/vb_jens" title="" class="quarto-navigation-tool px-1" aria-label="Twitter"><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/in/vb-jens/" title="" class="quarto-navigation-tool px-1" aria-label="LinkedIn"><i class="bi bi-linkedin"></i></a>
    <a href="mailto:jens.mountainmath.ca" title="" class="quarto-navigation-tool px-1" aria-label="Email"><i class="bi bi-envelope-at-fill"></i></a>
</div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Other Canadian data focused blogs:</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://homefreesociology.com" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HomeFreeSociology</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.dshkol.com" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dmitry Shkolnik’s blog</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.simoncoulombe.com" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simon Coulombe’s blog</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://financesofthenation.ca/category/commentary/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Finances of the Nation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://deny.substack.com" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deny’s Substack</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://higheredstrategy.com/author/alex/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Alex Usher’s blog</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p>Mountain Doodles is an insomnia driven side project, born out of random questions, trying to give partial answers through data. During daytime at <a href="https://mountainmath.ca">MountainMath</a>.</p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p style="text-align:center;">
<i>(Joint with Nathan Lauster and cross-posted at <a href="https://homefreesociology.com/2023/02/21/investing-in-definitions-and-framing/" target="_blank">HomeFreeSociology</a>)</i>
</p>
<p>With last week’s CHSP release of data on the <a href="https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=4610007001">investment status of residential properties</a> and the framing of the <a href="https://www150.statcan.gc.ca/n1/pub/46-28-0001/2023001/article/00001-eng.htm">accompanying article</a> there has been a lot of <a href="https://www.cbc.ca/news/canada/british-columbia/housing-investors-canada-bc-1.6743083">rather uninformed</a> and <a href="https://www.cbc.ca/news/canada/london/london-ontario-investment-property-1.6739784">misleading</a> news coverage.</p>
<p>The misleading reporting, combined with sometimes plainly wrong statements by people quoted in the news coverage, on one hand highlights the poor understanding of housing in the public discourse. On the other hand it highlights the importance of providing careful framing with data releases. In general it is good practice to accompany a data release with a brief analysis to provide framing and context. Analysts close to the raw data will have a much better understanding of what the data is measuring and can properly frame the data. Unfortunately, StatCan fell short of doing so, and the overview analysis provided by StatCan itself contains a number of problems. Given the public attention this has gotten it’s probably worthwhile to take a look at what the data does and does not say, and to correct some of the misinterpretations that have been circulating.</p>
<section id="the-trouble-with-the-definitions" class="level2">
<h2 class="anchored" data-anchor-id="the-trouble-with-the-definitions">The trouble with the definitions</h2>
<p>For any data release it’s important to understand the definitions underlying the categorization in the data. Central to this release is how “investors” are defined.</p>
<p>In common language, “investors” are typically defined by motivation and expectation. The New Oxford American Dictionary defines “investor” as: “a person or organization that puts money into financial plans, property, etc. with the expectation of achieving a profit.” Statistics Canada does not have access to motivations or expectations through the CHSP program. This suggests they probably should have considered different language in this study, and at the very least have been prepared for a lot of misinterpretation in media coverage.</p>
<p>Rather than exploring motivation or expectation, we get a definition of which property owners are considered “investors” from Statistics Canada that simply groups by point-in-time category. So investors include:</p>
<ul>
<li>for-profit businesses</li>
<li>governments</li>
<li>individuals not found resident in the province</li>
<li>individuals resident in the province owning more than one property</li>
<li>individuals resident in the province owning a property with more than one residence</li>
</ul>
<p>We want to pause for a moment here to ponder the choice to include governments as investors. Governments do indeed own a fair amount of property (see, for instance, the <a href="https://opendata.vancouver.ca/explore/dataset/city-owned-properties/information/">City of Vancouver’s vast holdings</a>), but it’s odd to speak of governments as investors. To be sure, they rent out properties and receive incomes on them, but usually holdings have to do with planning objectives and other government purposes.</p>
<p>Stranger yet, we’re told governments are combined with for-profit businesses in reporting, and, “Given the predominance of businesses in this category, they will simply be referred to as “business” in what follows.” This is an odd choice, and surprisingly sloppy coming from StatCan. A <a href="https://www150.statcan.gc.ca/n1/daily-quotidien/221110/dq221110c-eng.htm">StatCan article from November of 2022</a> initially reporting on business and government ownership, for instance, retained both in the title of the category to avoid misinterpretation in collapsing the two. The collapse of the distinction here seems like a red flag by comparison, especially within a context where “investors” are likely to be interpreted as uniquely profit oriented in media coverage.</p>
<p>What of other groups included? Statistics Canada is implicitly making some very strong assumptions here about who is profit motivated and who isn’t. Purchasing a home for a family member to use? Investor. Resident homeowner basing retirement plans on best time to cash out their equity? Non-investor. Vacation home owner? Investor (but only if their primary residence is also owned, they’re not an investor if their primary residence is rented). Even in these few examples, we can see how temporal considerations might also matter. In practice, property owners regularly shift their motivations and relationships to properties through time, problematizing their neat division into “investors” or “non-investors” assessed at any particular point in time. Similarly, organizations like non-profits, automatically exempt from the definition of investor here, often run some housing as market housing, redirecting profits to support subsidies for other housing.</p>
<p>Overall, we can cut Statistics Canada some slack here in laying out their categorical definitions insofar as <a href="https://homefreesociology.com/2022/06/30/a-brief-history-of-canadian-real-estate-investors/">they’re not the only ones making these assumptions</a>. But these assumptions should be treated critically and carefully, ideally making them explicit by discussion of their pros and cons. Here StatCan can do a lot better, and usually does.</p>
<p>Statistics Canada moves on from defining categories of investors to defining <em>investment properties</em>. This adds a new layer of complication insofar as matching owner categories to property categories is tricky. After all, single owners can hold multiple properties (part of the definition used for “investors”). Moreover single properties can have multiple owners and contain multiple dwellings. Grouping properties by buildings doesn’t help us here, and in fact adds to the complexity insofar as single properties can have multiple buildings, and single buildings can contain multiple properties (legally structured through condominium or strata legislation). Here all the complexity of matching owners to properties to dwellings gets swept up into three new categories: <em>investment properties</em>, <em>owner-occupied investment properties</em>, and <em>non-investment properties</em>. To simplify:</p>
<ul>
<li>A <strong>non-investment property</strong> is a property with a single dwelling unit which is either
<ul>
<li>the primary residence of at least one of the owners, or</li>
<li>the sole property of each of the owners, all of which residing somewhere in the same province</li>
</ul></li>
<li>An <strong>owner-occupied investment property</strong> is a property with multiple dwelling units that is the primary residence of at least one of the owners.</li>
<li>An <strong>investment property</strong> is everything else.</li>
</ul>
<p>Part of the confusion in the media stems from the distinction between <em>investment property</em> and <em>non-investment property</em> remaining ambiguous about how the property is actually used, as we have already seen in the example of vacation properties above. Consider how a property with a single dwelling unit that is rented out could be classified as either one. Same for a property that is left empty.</p>
<p>The property use that the definition is less ambiguous about is if the property is in some way owner-occupied. In that case it is not solely an <em>investment property</em>, but it could be either a <em>non-investment property</em> or an <em>owner-occupied investment property</em>. Here adding a separate suite, often known as a “<a href="https://www.thespruce.com/what-is-a-granny-flat-1695933%22">granny flat</a>, automatically shifts a property into investment status, even if the owner’s granny moves in, or if nobody moves in and it’s still used as part of the living area of the main owner-occupied unit.</p>
<p>This wouldn’t matter a great deal if the stakes for being considered an <em>investor</em> didn’t seem so loaded with negative connotations. Maybe there is some real estate investment we want? In particular, many people have pointed out our housing shortage in Canada, where <a href="https://www.theglobeandmail.com/opinion/editorials/article-canada-needs-a-lot-more-rental-housing-vancouver-is-leading-the-way/">we’re especially short on rentals</a>. The StatCan release notes that rental properties</p>
<blockquote class="blockquote">
<p>contribute to the rental housing supply—and therefore meet the population’s need for rental housing – but that can also limit the number of properties available to buyers who intend to use it as a primary place of residence.</p>
</blockquote>
<p>On the one hand this hints at a desire to elevate home ownership (by owner-occupiers), on the other hand it ignores the structure of single properties with multiple dwelling units, which cannot be made legally available for separate sale. And things get even more fuzzy when we get to purpose-built rental properties, which can produce misleading quirks in the data as we will discuss below.</p>
<p>Likely for this reason the press release has focused on <strong>houses</strong> defined as single-detached houses, semi-detached houses, row houses, and mobile homes, and <strong>condominium apartment</strong> property types when reporting statistics and comparing across jurisdictions. That does avoid some of the problems by excluding properties with multiple dwelling units. It filters out suited single family homes as well as large portions of purpose-built rental buildings, depending on how they are legally structured. But it’s still a statistic that can produce highly misleading results running counter to expectations of the casual reader, as we will explain further below, and CHSP fails to provide proper guidance.</p>
<p>In summary, we believe the definitions in this data release aren’t particularly useful in providing meaningful information about Canadian housing, and they aren’t sufficiently contextualized to provide a non-expert the means to adequately interpret the data.</p>
</section>
<section id="what-is-a-condominium-apartment" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-condominium-apartment">What is a condominium apartment?</h2>
<p>Much of the news about the release has focused on condominium apartments. Colloquially these are often referred to simply as “condos”, but there are some important differences between the colloquial understanding and the formal definition by StatCan.</p>
<p><strong>Condominium</strong> refers to the <em>legal form</em> of ownership, also called <strong>strata</strong> in some parts of the country, which divides air parcels or land (“bare land strata”) so it can be sold and owned separately while some elements are held in common ownership. It makes owning individual apartment units possible, but also applies to many semi-detached houses (also know colloquially as “duplex” in some parts of the country), townhouses, bare land, as well most recently to imaginary units created solely for property tax purposes (“air parcels”).</p>
<p><strong>Apartment</strong> is a <em>structural type of dwelling</em>, which for StatCan refers generally to <a href="https://www12.statcan.gc.ca/census-recensement/2021/ref/98-500/001/98-500-x2021001-eng.cfm">structures with three or more units</a>.</p>
<p><strong>Condominium apartment</strong> consequently denotes the intersection of those two concepts, or as explained in the data release</p>
<blockquote class="blockquote">
<p>A condominium apartment refers to a set of living quarters that is owned individually, while land and common elements are held in joint ownership with others.</p>
</blockquote>
<p>But there is important nuance to this, notably strata titled purpose-built rental apartments. These function and operate just like a purpose-built rental apartment structured legally as single ownership freehold, except it is legally structured as condominium, making each unit it’s separate legal entity but all units, while “owned individually” are held by the same owner. In the BC data underlying the CHSP building stock data, purpose-built rental apartment structured legally as condominium are identified by <em>actual use codes</em> 058 and 059, as opposed to actual use code 030 for condominium apartments which are generally sold and owned individually. The CHSP data does not distinguish between these two, and more importantly, fails to provide this context. This fundamentally challenges the framing provided in the overview analysis. The disparate treatment of purpose-built rental buildings depending on how they are legally structured causes problems when interpreting the data, in particular when the share of condominium titled purpose-built rental units among all condominium apartments varies across geographies.</p>
</section>
<section id="purpose-built-rental-buildings" class="level2">
<h2 class="anchored" data-anchor-id="purpose-built-rental-buildings">Purpose-built rental buildings</h2>
<p>One type of <em>investment property</em> that most people believe we should have more of is purpose-built rental buildings. These can be classified in a variety of ways, if the owner lives in one of the units it will be an <em>owner-occupied investment property</em>, if the owner does not live there it will be an <em>investment property</em>, and if the purpose-built rental building is legally structured as condominium, then the building will be classified as many <em>investment properties</em>, one for each dwelling unit (or strata lot). And this last point also shows how even simple statistics like the total share of properties that are investment properties in a given municipality can become very misleading.</p>
<p>To put it simply, big apartment buildings can show up as a lot of properties when structured into condominium, or a single property when structured like most purpose-built rental. But sometimes purpose-built rental is ALSO structured like condominium.</p>
<p>For example, focusing in on condominium apartments in the city of Vancouver as reported in the CHSP data 41.5% of the properties are classified as investment properties. But about 5% of these, roughly half of the 10.1% of the condominium apartment units owned by businesses, are in purpose-built rental apartments that happen to be legally structured as condominium. To give a specific example, the <a href="https://pw-yaletown.com">Peter Wall Yaletown at 1310 Richgards</a> is a rental building that is legally structured as condominium; each individual unit is <a href="https://www.bcassessment.ca/Property/Info/RDAwMDE0NURIMQ==">legally separated into it’s own strata lot</a>.</p>
<p>The public generally is not attuned to how a purpose-built rental building is legally structured, renters won’t be able to tell the difference unless they look it up in land title data.</p>
<p>In Vancouver this does not make that much of a difference, the share of non-purpose-built rental condominium apartments that are <em>investment properties</em> is 38.4%, not much different from the overall. Where it does make a difference is when <a href="https://www.cbc.ca/news/canada/british-columbia/housing-investors-canada-bc-1.6743083">news articles and commentators talk up the business-owned condominium units</a> and fail to provide this context. After all, the condominium titled purpose-built rental apartments make up a significant share of the business-owned investment condos.</p>
<p>This problem of inadequate framing from StatCan get’s even more concerning when condominium titled purpose-built rental buildings make up a much larger share of overall condominium units. In London, Ontario, news reports took StatCan data at face value and headlined [“More than 86 per cent of London’s apartment condos are owned by investors: StatsCan”]((https://www.cbc.ca/news/canada/london/london-ontario-investment-property-1.6739784) and falsely interpreted this as “a sign first-time buyers are being squeezed out of the market by investors, who are cashing in on the city’s severe undersupply of purpose-built rental apartments” instead of simply this being part of the purpose-built rental apartment supply. We can observe the echo of this by contextualizing the data with other data sources, in particular the Census and the CMHC condominium apartment secondary rental market survey.</p>
<p>It is important to recognize that these other data sources differ in how data was categorized and what concepts are measured. The CMHC condominium apartment universe will exclude apartments that are classified as part of the primary rental market, so it will excluded condominium titled purpose-built rental apartments. On the other hand, the CMHC survey may have gaps that can skew the data.</p>
<p>Census data only reports on condominium units that are someone’s usual place of residence, so it will miss units that are unoccupied or occupied by temporarily present persons like students who return to live with their parents over summer. The Census determines the condominium status of a dwelling unit by asking the respondent, which will yield a different response than when accessing the legal status from administrative data. For example residents of bare land strata will often incorrectly report not being part of a condominium development. More important for our purpose, renters may be much less aware whether their rental home is condominium or not. In particular, renters in a purpose-built rental apartment will generally not know about the underlying legal structure of their building and self-report as not living in a condominium unit, whereas renters renting from individual owners within a condominium apartment generally report as living in condominium.</p>
<p>Despite of, and sometimes because of these differences, important information can be obtained by comparing these data sources.</p>
<p><img src="index_files/figure-html/chsp-cmhc-census-comparison-1.png" width="1200"></p>
<p>We see that the overall CMHC condominium apartment universe is lower than the estimate of occupied (by usual residents) condominium apartment units from the Census, and the same is true for the number of rented condominium apartment units. Moreover, CHSP seems to under-estimate the owner-occupied stock, as should be expected given the biased error distribution inherent in the classification method. What stands out most, however, is the large difference in number of condominium apartment units in the CHSP data compared to the other two data sources, and that this can be to a very large extent attributed to business-owned condominium apartment units.</p>
<p>To confirm this we can compare the CMHC primary apartment rental market universe, which contains condominium titled purpose-built rental buildings, to the non-condominium apartment units identified in the census. One note here is that CMHC only counts structures with at least six rental units, while the census will identify buildings like single family homes with two secondary suites as apartments, so there are some differences to be mindful of.</p>
<p><img src="index_files/figure-html/cmhc-census-comparison-1.png" width="1200"></p>
<p>The match between those two is quite strong, lending strong evidence to the hypothesis that a very large portion of the apartment condominium units are condominium titled purpose-built rental units.</p>
<p>To wrap this up we can put those together to understand the total apartment building stock, remembering that CMHC rental apartments only count units with six or more units.</p>
<p><img src="index_files/figure-html/chsp-cmhc-census-comparison-combined-1.png" width="1200"></p>
<p>We added in data from the 2016 census for which we have information on how many apartment units were occupied by temporarily present persons or were unoccupied, to have a more complete picture of the entire apartment dwelling stock as classified by the census. Unfortunately we don’t have this data for the 2021 census at this point. The apartment stock has likely grown between the 2016 and 2021 census. This is meant for reference to contextualize the 2021 census data on the apartment units which are occupied by usual residents. Also note that “unoccupied” apartments <a href="https://doodles.mountainmath.ca/blog/2022/02/14/unoccupied-canada/">should not be confused with long term empty homes</a>.</p>
<p>This shows that the overall number of units estimated by CMHC and the census still line up reasonably well. the CHSP data only counts condominium apartments, and comparing to the other data sources we conclude that the overwhelming majority of <em>business investor</em> condominium apartments are in purpose-built rental buildings that neither CMHC, nor renters self-reporting in the census consider to be “condos.” Here the legal structure departs from the common-sense and practical definition. These units are not available for sale to residents, nor are they governed in a similar fashion to other condominium units. But the CHSP release ignores this distinction, correspondingly boosting estimates of investor-owned properties relative to if they were treated as singular purpose-built rental properties. The gap between the totals from the CHSP data and the other data sources is attributable to London also having purpose-built rental buildings that are not legally structured as condominium. Moreover, this highlights the distinction between <em>properties</em> and <em>dwelling units</em>, which makes it impossible to complete the comparison by adding in non-condominium apartment units in the CHSP data since the CHSP reports only on <em>properties</em> and does not allow to enumerate <em>dwelling units</em>.</p>
</section>
<section id="new-condo-stock" class="level2">
<h2 class="anchored" data-anchor-id="new-condo-stock">New condo stock</h2>
<p>To touch on a few other points, new condominium apartments will show up with higher rates of investor ownership in the CHSP data for several reasons. A simple one is unsold new inventory, which CHSP data will identify as investor units held by a business. Apart from that we generally see higher rates of transactions, and associated transactional vacancies, for new condominium apartment stock due to condominium apartment financing. Moreover, CHSP methods will likely under-estimate owner-occupiers for recent movers. This is basic context for anyone familiar with housing, making it surprising to see commentators trying to interpret this as a trend of increasing investor activity.</p>
</section>
<section id="emphasizing-foreignness" class="level1">
<h1>Emphasizing “foreignness”</h1>
<p>Another problematic aspect of the choice of definitions in the CHSP release is the prioritization of “foreignness” in the classification of investment properties. The issue arises when an <em>investment property</em> has multiple owners on title, with some living in different jurisdictions. When classifying such a property as <em>business and government owned</em>, <em>non-resident owned</em>, <em>out of province owned</em> or <em>in-province owned</em>, priority is given if at least one of the owners falls into these categories in this order. This further emphasizes the “foreignness” bias <a href="https://homefreesociology.com/2021/01/26/rethinking-the-foreignness-of-owners-living-abroad/">inherent in CHSP’s owner matching methods</a>. This is in contrast to how non-residency was treated in previous releases, where it was based on majority ownership or reported as mixed or pure residency status of owners.</p>
<section id="takeaway" class="level2">
<h2 class="anchored" data-anchor-id="takeaway">Takeaway</h2>
<p>In the past CHSP has added valuable data to enhance the understanding of housing in Canada. Unfortunately this release didn’t. The definitions used in the CHSP data release aren’t particularly useful to gain meaningful insights into Canadian housing, and the CHSP release fails to properly contextualize the data. Given owners’ shifting motivations and relationships to properties, we maintain that the most important question is <a href="https://doodles.mountainmath.ca/blog/2018/12/17/how-are-condos-used/">how properties are used</a> rather than how they are owned. That’s not to say that the complexities and motivations of ownership aren’t also interesting. But they’re not well captured here.</p>
<p>The choices by CHSP on how to slice the data are questionable on multiple grounds. We’ve demonstrated special problems with regard to how strata titled purpose-built rental apartments show up. The complete lack of disclosure of this when discussing condominium apartment investors in the CHSP overview analysis is highly misleading and in some cases directly responsible for the outright wrong news coverage on this.</p>
<p>Other context missing from the release is <a href="https://doodles.mountainmath.ca/blog/2022/06/30/a-brief-history-of-canadian-real-estate-investors/">the historical data on multiple property ownership in Canada</a>, readily available from other statistical datasets at StatCan, that would greatly assist in interpreting the data.</p>
<p>To move the discussion forward CHSP should focus on providing strong framing with data releases to avoid the media and public misinterpreting the data. Likewise, media, commentators, and the broader public need to pay more attention to definitions.</p>
<p>This does not mean that ownership of housing is not important; it is. But the motivations, expectations, and practices of property owners can prove elusive, and regularly shift over the course of the same underlying legal relationship. This is a challenge for trying to match data up to definitions of investment, let alone increasingly popular conceptualizations of terms <a href="https://homefreesociology.com/2021/08/13/commodity-and-keeping-it-in-the-family/">like commodification</a> and financialization as applied to housing, which rely upon strong assumptions about motivations, expectations, and practices. We’re very open to empirical contributions here, but ideally these contributions should directly address ambiguities and embrace underlying complexities, rather than sweeping them under the rug.</p>
<p>Lastly the meaning of ownership relative to renting is also complex and contingent. Aside from turning renters into owners, shifts in rental tenancy legislation can reset terms, providing access to the security many renters seek in ownership. In our mind a practical takeaway from the fact that many Canadians rent is that we should strengthen tenant rights, especially in the secondary market <a href="https://www150.statcan.gc.ca/n1/pub/11-627-m/11-627-m2022046-eng.htm">where most of the evictions happen</a>.</p>
<p>As usual, the code for this post is <a href="https://github.com/mountainMath/doodles/blob/master/content/posts/2023-02-20-investing-in-definitions-and-framing/index.Rmarkdown">available on GitHub</a> for anyone to reproduce or adapt.</p>
<details>
<summary>
Reproducibility receipt
</summary>
<pre><code>## [1] "2023-02-20 20:14:16 PST"</code></pre>
<pre><code>## Local:    master /Users/jens/Documents/R/mountaindoodles
## Remote:   master @ origin (https://github.com/mountainMath/doodles.git)
## Head:     [df7e737] 2023-02-21: chsp investor post</code></pre>
<pre><code>## R version 4.2.2 (2022-10-31)
## Platform: aarch64-apple-darwin20 (64-bit)
## Running under: macOS Ventura 13.2.1
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] statcanXtabs_0.1.2 cancensus_0.5.5    cansim_0.3.14      cmhc_0.2.4        
##  [5] forcats_1.0.0      stringr_1.5.0      dplyr_1.1.0        purrr_1.0.1       
##  [9] readr_2.1.3        tidyr_1.3.0        tibble_3.1.8       ggplot2_3.4.0     
## [13] tidyverse_1.3.2   
## 
## loaded via a namespace (and not attached):
##  [1] lubridate_1.9.1           assertthat_0.2.1         
##  [3] digest_0.6.31             utf8_1.2.3               
##  [5] R6_2.5.1                  cellranger_1.1.0         
##  [7] backports_1.4.1           reprex_2.0.2             
##  [9] evaluate_0.20             httr_1.4.4               
## [11] blogdown_1.16             pillar_1.8.1             
## [13] rlang_1.0.6               googlesheets4_1.0.1      
## [15] readxl_1.4.1              rstudioapi_0.14          
## [17] jquerylib_0.1.4           rmarkdown_2.20           
## [19] googledrive_2.0.0         munsell_0.5.0            
## [21] broom_1.0.3               compiler_4.2.2           
## [23] modelr_0.1.10             xfun_0.37                
## [25] pkgconfig_2.0.3           htmltools_0.5.4          
## [27] tidyselect_1.2.0          bookdown_0.32            
## [29] fansi_1.0.4               crayon_1.5.2             
## [31] tzdb_0.3.0                dbplyr_2.3.0             
## [33] withr_2.5.0               grid_4.2.2               
## [35] jsonlite_1.8.4            gtable_0.3.1             
## [37] lifecycle_1.0.3           DBI_1.1.3                
## [39] git2r_0.31.0              magrittr_2.0.3           
## [41] scales_1.2.1              cli_3.6.0                
## [43] stringi_1.7.12            cachem_1.0.6             
## [45] fs_1.6.0                  xml2_1.3.3               
## [47] bslib_0.4.2               ellipsis_0.3.2           
## [49] generics_0.1.3            vctrs_0.5.2              
## [51] tools_4.2.2               mountainmathHelpers_0.1.4
## [53] glue_1.6.2                hms_1.1.2                
## [55] fastmap_1.1.0             yaml_2.3.7               
## [57] timechange_0.2.0          colorspace_2.1-0         
## [59] gargle_1.3.0              rvest_1.0.3              
## [61] knitr_1.42                haven_2.5.1              
## [63] sass_0.4.5</code></pre>
</details>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@misc{von bergmann2023,
  author = {von Bergmann, Jens and Lauster, Nathan},
  title = {Investing in Definitions and Framing},
  date = {2023-02-20},
  url = {https://doodletest.netlify.app/posts/2023-02-20-investing-in-definitions-and-framing},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-von bergmann2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Bergmann, Jens von, and Nathan Lauster. 2023. <span>“Investing in
Definitions and Framing.”</span> <em>MountanDoodles</em> (blog).
February 20, 2023. <a href="https://doodletest.netlify.app/posts/2023-02-20-investing-in-definitions-and-framing">https://doodletest.netlify.app/posts/2023-02-20-investing-in-definitions-and-framing</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/doodletest\.netlify\.app");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>